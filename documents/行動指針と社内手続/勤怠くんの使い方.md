# 勤怠くんの使い方

## 概要

ユニバでは出退勤の管理に slack を利用しています。

general チャネルで

- 出社したときには「おは」
- 退社するときに「おつ」

とつぶやくことで、タイムカードが打刻されます。

## 操作

勤怠くんは以下の 5 つのアクションに反応します。

-  `おは` - 出勤を打刻する
-  `おつ` - 退勤を打刻する
- `誰いる` - 今出勤している人を一覧する
- `誰いない` - まだ出勤していない人、もう退勤した人を一覧する
- `いまのなし` - 直前の操作をキャンセルする（60 秒以内）

それぞれがどのようなキーワードで反応するかは各自試してみましょう。

## 動作詳細

### 打刻の上書き

すでにその日の出退勤が記録されている場合は「おは」「おつ」などをつぶやいても「もう出勤済みです」「もう退勤済みです」などのレスポンスが返されます。打刻を上書きしたい場合は「おは 10:00」のように、メッセージの中に時刻を明示してみましょう。

### 24 時をまたいだ場合の挙動

人によっては 24 時を過ぎても作業を続けるケースがあります。そこで勤怠くんでは、翌 7 時までの「おつ」は、前日の退勤として認識するようにしています。

逆に__「おは」は 24 時を過ぎた時点で、次の日の出勤とみなされます。これは、24 時以降に会社に来て前日の出勤扱いで働き始める、というケースがあり得ないからです。

## トラブルシューティング

### 「おは」したけど「もう出勤済みです」と言われてしまう

気がつかない間に「おは」してしまったのかもしれません。「おは 10:00」などのように、本来の出勤時間をつぶやきましょう。

### 「おつ」したけど「まだ出勤してないよ」と言われてしまう

もしかして出勤を打刻し忘れてませんか？　24 時を回っていなければ「おは 10:00」などのように、本来の出勤時間をつぶやきましょう。そのあとに「おつ」すれば出退勤が正常に記録されるはずです。もし 24 時を回ってしまった場合「おは」するすべはありません（その「おは」は次の日の出勤とみなされてしまうので）。ごめんなさい。

徹夜作業で 7 時を過ぎてから「おつ」しようとしていませんか？　7 時を回ると、メッセージは「次の日」扱いされていまいます。「おつ 06:00」のように、7時以前の時刻を含めてつぶやけば、前日の退勤扱いとして打刻されます。

### 「おは」「おつ」してないのに反応する

今のところ反応するキーワードをかなりゆるーく設定しています。そのため、全く関係ない会話をしたり、URL を貼り付けたりするだけで unibot が反応することがあります。その場合はすぐに「いまのなし」とつぶやけば、誤ったデータが登録されることはありません。

